NTP时间服务器
  chrony
  vim /etc/chrony.conf
    server ntp1.aliyun.com iburst
    allow 0/0
  date +%z        查看本机时区
  timedatectl   --help     用该命令修改时区
  chronyc sources -v     查看NTP服务状态 ^? 同步失败 ^*同步成功
  ss -natulp | grep 123  查看ntp端口号

云计算
  基于互联网的相关服务
  Iaas 基础设施即服务
  Paas 平台即服务
  Saas 软件即服务
  
openstack
  openstack时一套Iaas解决方案
  是一个开源的云计算管理平台
  
  Horizon
    管理openstack各种服务,基于web的管理接口
    通过图形界面管理操作

  Keystone
    为其他服务提供认证授权的集中身份管理
  
  Neutron
    软件定义网络
    
  cinder
    虚拟机管理储存卷
    
  Nova
    节点上管理虚拟机服务
    
  Glance
    扮演虚拟镜像角色
    
 openstack环境准备
   KVM创建2台虚拟机
   #!/bin/bash
    read -p "Enter virtual name:" name
    qemu-img create -f qcow2 -b /var/lib/libvirt/images/node.qcow2 /var/lib/libvirt/images/${name}.img 50G &> /dev/null
    sed "s/node/${name}/" /root/nsd1810/node.xml > /etc/libvirt/qemu/${name}.xml
    virsh define /etc/libvirt/qemu/${name}.xml
    virsh start ${name}
    
   磁盘扩容
    lsblk
    export LANG=en_US       //改变语言环境
    growpart  /dev/vda 1       //磁盘扩容
    xfs_growfs  /dev/vda1      //刷新文件格式
    df -hT                     //查看扩容后磁盘信息
    
   ip地址
    vim /etc/sysconfig/network-scripts/ifcfg-eth0
      # Generated by dracut initrd
      DEVICE="eth0"
      ONBOOT="yes"
      NM_CONTROLLED="no"
      TYPE="Ethernet"
      BOOTPROTO="static"
      IPADDR="192.168.1.11"
      NETMASK="255.255.255.0"
      GATEWAY="192.168.1.254"
    cd   /etc/sysconfig/network-scripts/
    cp ifcfg-eth0  ifcfg-eth1
    vim /etc/sysconfig/network-scripts/ifcfg-eth1
      # Generated by dracut initrd
      DEVICE="eth1"
      ONBOOT="yes"
      NM_CONTROLLED="no"
      TYPE="Ethernet"
      BOOTPROTO="static"
      IPADDR="192.168.4.11"
      NETMASK="255.255.255.0"
    reboot
    
   dns配置
    vim /etc/resolv.conf
      nameserver 真机dns
      
   配置yum源
    
   设置主机名 修改/etc/hosts
    echo openstack > /etc/hostname
    hostname openstack
    exit
    ssh .........
    
    vim /etc/hosts
      127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
      ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
      192.168.1.11	nova01
      192.168.1.10	openstack

安装openstack
    创建逻辑卷
    导入签名检查文件
    openstack安装
      1)安装虚拟化平台
        qemu-kvm libvirt-client libvirt-daemon libvirt-daemon-driver-qemu python-setuptools
      2)安装packstack
        openstack-packstack
      3)创建应答文件
        packstack --gen-answer-file=answer.ini
      4)编辑应答文件
          vim /root/answer.ini
          42 CONFIG_SWIFT_INSTALL=n
          75 CONFIG_NTP_SERVERS=192.168.1.254          
          333 CONFIG_KEYSTONE_ADMIN_PW=a
          840 CONFIG_NEUTRON_ML2_TYPE_DRIVERS=flat,vxlan
          876 CONFIG_NEUTRON_ML2_VXLAN_GROUP=239.1.1.5          
          910 CONFIG_NEUTRON_OVS_BRIDGE_MAPPINGS=physnet1:br-ex
          921 CONFIG_NEUTRON_OVS_BRIDGE_IFACES=br-ex:eth0
          936 CONFIG_NEUTRON_OVS_TUNNEL_IF=eth1
          1179 CONFIG_PROVISION_DEMO=n
       5)启动openstack
          packstack --answer-file=answer.ini
       6)安装 openstack 工具包
          yum install openstack-utils
       7)检查服务状态
          openstack-status
       8)openstack 命令行认证
         cd /root/
         . keystonerc_admin

         openstack 命令行 参数1  参数2  参数3 ... ...
         openstack 子命令
          查看帮助
         openstack help 子命令

  步骤一：查看外部OVS网桥
    1）查看br-ex网桥配置（br-ex为OVS网桥设备）
    [root@openstack ~]# cat /etc/sysconfig/network-scripts/ifcfg-br-ex 
    ONBOOT="yes"
    NM_CONTROLLED="no" 
    IPADDR="192.168.1.1"
    PREFIX=24
    GATEWAY=192.168.1.254
    DEVICE=br-ex
    NAME=br-ex
    DEVICETYPE=ovs
    OVSBOOTPROTO="static"
    TYPE=OVSBridge
    
    2）查看eth0网卡配置（该网卡为OVS网桥的接口)
    [root@nova ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0 
    DEVICE=eth0
    NAME=eth0
    DEVICETYPE=ovs
    TYPE=OVSPort
    OVS_BRIDGE=br-ex
    ONBOOT=yes
    BOOTPROTO=none
    
    3）验证OVS配置
        [root@nova ~]# ovs-vsctl show
        Bridge br-ex
            Controller "tcp:127.0.0.1:6633"
                is_connected: true
            fail_mode: secure
            Port br-ex
                Interface br-ex
                    type: internal
            Port phy-br-ex
                Interface phy-br-ex
                    type: patch
                    options: {peer=int-br-ex}
            Port "eth0"
                Interface "eth0"
ovs_version: "2.5.0"
